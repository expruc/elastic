apiVersion: stackconfigpolicy.k8s.elastic.co/v1alpha1
kind: StackConfigPolicy
metadata:
  name: test-stack-config-policy
  namespace: elastic
spec:
  elasticsearch:
    #Create index template to connect to the index lifecycle
    indexTemplate:
      composableIndexTemplates:
        blackops:
          composed_of:
          - logs-settings
          - logs-mappings
          index_patterns:
          - blackops*
          template:
          #transformed to json and added in index settings (UI)
            index:
              lifecycle:
                name: delete-after-one-day
                rollover_alias: elastic
    indexLifecyclePolicies:
    #Might need to configure Hot phase (in UI automatically configured)
      delete-later-1-day:
        phases:
          delete:
            actions:
              delete: {}
            min_age: 1d

